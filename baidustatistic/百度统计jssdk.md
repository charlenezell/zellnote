# 百度统计

## trackPageview说明
**ajax页面切换统计url pv**
> pageURL：指定要统计PV的页面URL。此项必选，必须是以”/”（斜杠）开头的相对路径

`_hmt.push(['_trackPageview', '/virtual/login']);`

> 在例子中，我们首先使用了_setAutoPageview接口关闭了自动PV跟踪，然后使用了_trackPageview接口来发送新的PV统计请求。
>
> 这样在页面被访问时，记入PV的就不是原URL了，而是您指定的新的URL。
>
> 请注意上述代码最好能够加在页头</head>标签前，至少要保证位于百度统计分析代码的前面。

```javascript
_hmt.push(['_setAutoPageview', false]);
_hmt.push(['_trackPageview', '/new/path/new/name']);
```

**使用限制和常见问题**
> 1 . URL必须是以”/”（斜杠）开头的相对路径
>
> 2 . 由于使用_trackPageview跟踪的页面无法作为其他页面的上游页面，因此在页面转化目标功能中不能将AJAX页面作为入口页或中间页，但可以作为目标页。


## trackEvent说明

`_hmt.push([‘_trackEvent’, 分类:String, 操作:String, 额外信息:String,额外可取平均的信息:Number]);`

**使用限制和常见问题**

> 百度统计目前针对_trackevent API 有多样性的限制，即在部署_trackevent API时，参数的多样性乘积不能超过10000，否则系统会自动抛弃超标的数据。

## _setCustomVar说明

`_hmt.push(['_setCustomVar', index:int(1-5), name:String, value:String, opt_scope:Int(1-3)=3]);`

> 1.访客级别：该标签跟该访客的整个活动周期是绑定的，同一个浏览器在网站上的所有活动，会被认为是来自于同一个访客。
> 2.访次级别：当访客在连续的一段时间内处于活动状态，我们会认识这是处于同一个访次内。如果访客一段时间没有访问任何页面，我们就会认为当前访次结束了。
> 3.页面级别：当访客在一个页面内活动时，就属于页面级别。
>
> 在需要对不同类别的访客的一系列行为做区分筛选的时候建议使用访客级别，比如“VIP会员的等级”等标签；
>
> 在需要对本访次的用户行为或状态做区分筛选的时候建议使用访次级别，比如“本次访问是否登陆账户”等标签；
>
> 在需要对本访次的访问内容或访问路径做区分筛选的时候建议使用页面级别，比如看了“体育频道”还是“财经频道”等标签。

**使用限制和常见问题**
> 每个索引对应的名字在使用一次后就会固定，以后无法更改。

> **opt_scope参数的覆盖规则：**
>
> 由于对一个访次来说每一个槽位(index)最终只会保留一个标签，所以当一个访次的同一个槽位(index)上出现多个标签时，将出现冲突的情况。对一个访次，统计逻辑会根据以下三步来决定一个访次的最终标签：
>
> 如果槽位中有访客级别标签，以时序上最后一个访客级别标签为最终标签。
> 如果槽位中无访客级别标签但有访次级别标签，以时序上最后一个访次级别标签为最终标签
> 如果槽位中既无访客级别标签又无访次级别标签，以时序上第一个页面级别标签为最终标签
>
> 建议在使用本接口时，尽量把不同级别的标签设置在不同的槽位(index)上，以免造成标签冲突引起的数据不一致。
>
> **opt_scope参数使用建议**
>
> 在需要对不同类别的访客的一系列行为做区分筛选的时候建议使用访客级别，比如“VIP会员的等级”等标签；
> 在需要对本访次的用户行为或状态做区分筛选的时候建议使用访次级别，比如“是否登陆”等标签；
> 在需要对本访次的访问内容或访问路径做区分筛选的时候建议使用页面级别，比如看了“体育频道”还是“财经频道”等标签。


## tongji API

https://tongji.baidu.com/open/api/more?p=tongjiapi_getData.tpl